<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ - ìƒí’ˆ ë“±ë¡</title>
    <link th:href="@{/css/store.css}" rel="stylesheet" />
</head>
<body>
<!-- í—¤ë” ì‚½ì… -->
<div th:replace="~{fragments/header :: header}"></div>

<!-- ìƒí’ˆ ë“±ë¡ -->
<section class="seller-product-section">
    <div class="container">
        <!-- í˜ì´ì§€ íƒ€ì´í‹€ -->
        <div class="page-header">
            <h2 class="page-title">ìƒí’ˆ ë“±ë¡</h2>
            <p class="page-description">ìƒˆë¡œìš´ ìƒí’ˆì„ ë“±ë¡í•˜ì„¸ìš”</p>
        </div>

        <!-- ìƒí’ˆ ë“±ë¡ í¼ -->
        <form id="product-form" method="post" th:action="@{/seller/products/create}" enctype="multipart/form-data">

            <!-- ê¸°ë³¸ ì •ë³´ ì„¹ì…˜ -->
            <div class="form-section-box">
                <h3 class="section-title">ê¸°ë³¸ ì •ë³´</h3>

                <div class="form-group">
                    <label>ìƒí’ˆëª… <span class="required">*</span></label>
                    <input type="text" name="productName" placeholder="ìƒí’ˆëª…ì„ ì…ë ¥í•˜ì„¸ìš” (ìµœëŒ€ 100ì)" maxlength="100" required />
                    <span class="char-count"><span id="name-count">0</span>/100</span>
                </div>

                <div class="form-group">
                    <label>ì¹´í…Œê³ ë¦¬ <span class="required">*</span></label>
                    <select name="category" required>
                        <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                        <option value="fashion">íŒ¨ì…˜Â·ì˜ë¥˜</option>
                        <option value="beauty">ë·°í‹°Â·ë¯¸ìš©</option>
                        <option value="food">ì‹í’ˆÂ·ê±´ê°•</option>
                        <option value="digital">ë””ì§€í„¸Â·ê°€ì „</option>
                        <option value="sports">ìŠ¤í¬ì¸ Â·ë ˆì €</option>
                        <option value="home">í™ˆÂ·ë¦¬ë¹™</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>ì •ê°€ <span class="required">*</span></label>
                        <input type="number" name="originalPrice" placeholder="0" min="0" required />
                        <span class="unit">ì›</span>
                    </div>
                    <div class="form-group">
                        <label>íŒë§¤ê°€ <span class="required">*</span></label>
                        <input type="number" name="salePrice" placeholder="0" min="0" required />
                        <span class="unit">ì›</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>í• ì¸ìœ¨</label>
                    <input type="number" name="discountRate" placeholder="0" min="0" max="100" />
                    <span class="unit">%</span>
                </div>
            </div>

            <!-- ìƒí’ˆ ì„¤ëª… ì„¹ì…˜ -->
            <div class="form-section-box">
                <h3 class="section-title">ìƒí’ˆ ì„¤ëª…</h3>

                <div class="form-group">
                    <label>ì§§ì€ ì„¤ëª…</label>
                    <input type="text" name="shortDescription" placeholder="ìƒí’ˆì„ í•œ ì¤„ë¡œ ì„¤ëª…í•´ì£¼ì„¸ìš” (ìµœëŒ€ 200ì)" maxlength="200" />
                    <span class="char-count"><span id="short-count">0</span>/200</span>
                </div>

                <div class="form-group">
                    <label>ìƒì„¸ ì„¤ëª… <span class="required">*</span></label>
                    <textarea name="description" rows="12" placeholder="ìƒí’ˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
                </div>
            </div>

            <!-- ì´ë¯¸ì§€ ì„¹ì…˜ -->
            <div class="form-section-box">
                <h3 class="section-title">ìƒí’ˆ ì´ë¯¸ì§€</h3>

                <div class="form-group">
                    <label>ë©”ì¸ ì´ë¯¸ì§€ <span class="required">*</span></label>
                    <div class="image-upload-area">
                        <input type="file" id="main-image" name="mainImage" accept="image/*" required style="display: none;" />
                        <label for="main-image" class="image-upload-btn">
                            <span class="upload-icon">ğŸ“·</span>
                            <span>ë©”ì¸ ì´ë¯¸ì§€ ì„ íƒ</span>
                            <span class="size-hint">ê¶Œì¥ í¬ê¸°: 800x800px</span>
                        </label>
                        <div class="image-preview" id="main-preview"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label>ìƒì„¸ ì´ë¯¸ì§€ (ìµœëŒ€ 5ì¥)</label>
                    <div class="image-upload-area">
                        <input type="file" id="detail-images" name="detailImages" multiple accept="image/*" style="display: none;" />
                        <label for="detail-images" class="image-upload-btn">
                            <span class="upload-icon">ğŸ“¸</span>
                            <span>ìƒì„¸ ì´ë¯¸ì§€ ì„ íƒ</span>
                        </label>
                        <div class="detail-preview" id="detail-preview"></div>
                    </div>
                </div>
            </div>

            <!-- ì¬ê³  ì„¹ì…˜ -->
            <div class="form-section-box">
                <h3 class="section-title">ì¬ê³  ì •ë³´</h3>

                <div class="form-group">
                    <label>ì¬ê³  ìˆ˜ëŸ‰ <span class="required">*</span></label>
                    <input type="number" name="stockQty" placeholder="0" min="0" required />
                </div>

                <div class="form-group">
                    <label>ì˜µì…˜ ì„¤ì •</label>
                    <div class="option-settings">
                        <div class="option-item">
                            <input type="text" name="option1Name" placeholder="ì˜µì…˜ëª… (ì˜ˆ: ìƒ‰ìƒ)" />
                            <textarea name="option1Values" placeholder="ì˜µì…˜ê°’ (ì‰¼í‘œë¡œ êµ¬ë¶„: ë¹¨ê°•, íŒŒë‘, ê²€ì •)" rows="3"></textarea>
                        </div>
                        <div class="option-item">
                            <input type="text" name="option2Name" placeholder="ì˜µì…˜ëª… (ì˜ˆ: ì‚¬ì´ì¦ˆ)" />
                            <textarea name="option2Values" placeholder="ì˜µì…˜ê°’ (ì‰¼í‘œë¡œ êµ¬ë¶„: S, M, L, XL)" rows="3"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ë°°ì†¡ ì„¹ì…˜ -->
            <div class="form-section-box">
                <h3 class="section-title">ë°°ì†¡ ì •ë³´</h3>

                <div class="form-group">
                    <label>ë°°ì†¡ë¹„</label>
                    <div class="delivery-options">
                        <label class="radio-label">
                            <input type="radio" name="deliveryType" value="free" checked />
                            <span>ë¬´ë£Œ</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="deliveryType" value="paid" />
                            <span>ìœ ë£Œ</span>
                        </label>
                    </div>
                </div>

                <div class="form-group" id="delivery-fee-group" style="display: none;">
                    <label>ë°°ì†¡ë¹„ ê¸ˆì•¡</label>
                    <input type="number" name="deliveryFee" placeholder="0" min="0" />
                    <span class="unit">ì›</span>
                </div>

                <div class="form-group">
                    <label>ë°°ì†¡ ì„¤ëª…</label>
                    <input type="text" name="deliveryDescription" placeholder="ì˜ˆ: ë‹¹ì¼ ë°°ì†¡, 2-3ì¼ ë°°ì†¡" />
                </div>
            </div>

            <!-- ë²„íŠ¼ -->
            <div class="form-actions">
                <button type="button" class="btn btn-cancel" onclick="history.back()">ì·¨ì†Œ</button>
                <button type="submit" class="btn btn-submit">ìƒí’ˆ ë“±ë¡</button>
            </div>
        </form>
    </div>
</section>

<!-- í‘¸í„° ì‚½ì… -->
<div th:replace="~{fragments/footer :: footer}"></div>

<script>
    // ê¸€ììˆ˜ ì¹´ìš´íŒ…
    document.querySelector('input[name="productName"]').addEventListener('input', function() {
        document.getElementById('name-count').textContent = this.value.length;
    });

    document.querySelector('input[name="shortDescription"]').addEventListener('input', function() {
        document.getElementById('short-count').textContent = this.value.length;
    });

    // ë°°ì†¡ ìœ ë£Œ/ë¬´ë£Œ ì„ íƒ
    document.querySelectorAll('input[name="deliveryType"]').forEach(radio => {
        radio.addEventListener('change', function() {
            const feeGroup = document.getElementById('delivery-fee-group');
            feeGroup.style.display = this.value === 'paid' ? 'block' : 'none';
        });
    });

    // ë©”ì¸ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°
    document.getElementById('main-image').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(event) {
                const preview = document.getElementById('main-preview');
                preview.innerHTML = `<img src="${event.target.result}" alt="ë©”ì¸ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°" />`;
            };
            reader.readAsDataURL(file);
        }
    });

    // ìƒì„¸ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°
    document.getElementById('detail-images').addEventListener('change', function(e) {
        const preview = document.getElementById('detail-preview');
        preview.innerHTML = '';

        Array.from(e.target.files).slice(0, 5).forEach(file => {
            const reader = new FileReader();
            reader.onload = function(event) {
                const img = document.createElement('img');
                img.src = event.target.result;
                img.alt = 'ìƒì„¸ ì´ë¯¸ì§€';
                preview.appendChild(img);
            };
            reader.readAsDataURL(file);
        });
    });

    // í¼ ì œì¶œ ê²€ì¦
    document.getElementById('product-form').addEventListener('submit', function(e) {
        const mainImage = document.getElementById('main-image').files[0];
        if (!mainImage) {
            e.preventDefault();
            alert('ë©”ì¸ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
            return;
        }
    });
</script>
</body>
</html>
